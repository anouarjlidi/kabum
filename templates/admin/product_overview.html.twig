{#
Copyright 2019-2020 Douglas Silva (0x9fd287d56ec107ac)

This file is part of KaBuM!.

KaBuM! is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with KaBuM!.  If not, see <https://www.gnu.org/licenses/>.
#}

{% extends 'admin/layout.html.twig' %}

{% block title %}{{ 'product_overview'|trans }} - {{ parent() }}{% endblock %}

{% import '_macros.html.twig' as macros %}

{% block main %}
  <h3 class="font-weight-light text-kabum-dark-blue mb-3">
    {{ 'product_overview'|trans }}
  </h3>
  <a href="{{ path('admin_new_product') }}" class="kabum-floating-button"
    title="{{ 'add_new_product'|trans }}">
    <span class="sr-only">{{ 'add_new_product'|trans }}</span>
    <i class="fas fa-plus fa-lg" aria-hidden="true"></i>
  </a>

  <div class="row row-cols-1 row-cols-sm-2 row-cols-lg-3 row-cols-xl-4 mt-4">
    {% for product in products %}
      <div class="col">
        <div class="shadow-sm rounded p-4 my-4">
          <div class="d-flex flex-column align-items-center mb-3">
            <img src="{{ asset(product_image_directory ~ product.image) }}"
              class="product-image-thumbnail mb-3" alt="{{ 'product_image'|trans }}"/>
            <small>{{ product.name }}</small>
          </div>
          <div class="d-flex justify-content-around">
            <a class="card-action-button" href="{{ path('admin_edit_product', {slug: product.slug}) }}"
              title="{{ 'edit'|trans }}">
              <span class="sr-only">{{ 'edit'|trans }}</span>
              <i class="fas fa-pencil-alt fa-lg" aria-hidden="true"></i>
            </a>
            <button class="card-action-button card-action-button-danger bs-modal-trigger"
              title="{{ 'delete'|trans }}" data-toggle="modal" data-target=".deleteProductModal"
              data-action="{{ path('admin_delete_product', {slug: product.slug}) }}"
              data-title="{{ 'delete_product_confirmation'|trans({'%product%': product.name}) }}">
              <i class="far fa-trash-alt fa-lg" aria-hidden="true"></i>
              <span class="sr-only">
                {{ 'delete_product_named'|trans({'%product%': product.name}) }}
              </span>
            </button>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
  {{ macros.deleteProductModal() }}
{% endblock %}
